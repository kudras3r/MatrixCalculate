
{% extends "base.html" %}


{% block title %}
  Home Page
{% endblock %}


{% block styles %}

{% endblock %}


{% block scripts %}

<script type="text/javascript">
function resizeFirstTable() {
    var table1 = document.getElementById("matr-table-1");
    var row1 = document.getElementById("row1").value;
    var col1 = document.getElementById("col1").value;
    row1 = Number(row1);
    col1 = Number(col1);
    
    if (row1 < 0 || col1 < 0) {
      alert("Size can't be <0 !")
    } 
    if (row1 == 0) {
        row1 = 3;
    }
    if (col1 == 0) {
        col1 = 3;
    }
    //document.getElementById("opers").innerHTML = 
   // document.getElementById("matr-table-1").innerHTML = "<tbody><tr><td><input size='0' name='num1[]' value=" + row1 + "|" + col1 + "></td></tr><tr id='tr1-1'></tr><tr id='tr2-1'></tr><tr id='tr3-1'></tr></tbody>"
    //document.getElementById("matr-table-1").innerHTML = "<tbody><tr>" + col1 * "<td><input size='0' name='num1[]' value=" + row1 + "|" + col1 + "></td>" + "</tr><tr id='tr1-1'></tr><tr id='tr2-1'></tr><tr id='tr3-1'></tr></tbody>"
   // document.getElementById("tr1-1").innerHTML = "<td><input name='num1[]' value=" + row1 + "|" + col1 + "></td>" + "<td><div class='col-xs-6'><input type='text' name='num1[]' placeholder='num' class='form-control name_list'/></div></td>".repeat(col1);
    document.getElementById("tr1-1").innerHTML = "<td><div class='col-xs-6'><input type='text' name='num1[]' placeholder='0' class='form-control name_list'/></div></td>".repeat(col1);
    document.getElementById("tr2-1").innerHTML = "<td><div class='col-xs-6'><input type='text' name='num1[]' placeholder='0' class='form-control name_list'/></div></td>".repeat(col1);
    document.getElementById("tr3-1").innerHTML = "<td><div class='col-xs-6'><input type='text' name='num1[]' placeholder='0' class='form-control name_list'/></div></td>".repeat(col1);
    
    var size = document.getElementById("size");
    let a = String(size.value);
    if (!a.includes('FLAG|1;' + row1 + ';' + col1 + '|-')) {
        size.value = a + 'FLAG|1;' + row1 + ';' + col1 + '|-';
    }
    //let a = "<div class='col-xs-6'><input value='|1;" + row1 + ";" + col1 +"|' name='num1[]' size='2'></div>";
    //let b = document.getElementById("aa");
    //b.insertAdjacentHTML("beforebegin", a);
    //document.getElementById("opers").innerHTML = "<div class='col-xs-6'><input value='|1;" + row1 + ";" + col1 +"|' name='num1[]' size='2'></div> \
    //    <div class='col-xs-6'><input value='➕' class='form-control name_list' type='submit' name='oper' size='2'></div>  \
    //    <div class='col-xs-6'><input value='✖' class='form-control name_list' type='submit' name='oper' size='2'></div>  \
    //    <div class='col-xs-6'><input value='➖' class='form-control name_list' type='submit' name='oper' size='2'></div>";

    //let size = document.createElement("div");
    //let a = document.getElementById("opers");
    //size.innerHTML = "<input value='" + row1 + "|" + col1 +"' name='num1[]' size='2'>";
    //a.append(size);

    if (row1 >= 3) { 
      for (let i = 0; i < (row1 - 3); i++) {
          var row = table1.insertRow(0);
          for (let j = 0; j < col1; j++) {
              var col = row.insertCell(j);
              col.innerHTML = "<td><div class='col-xs-6'><input type='text' name='num1[]' placeholder='0' class='form-control name_list'/></div></td>";
          }
      }
  }
  else {
      for (let i = row1 + 1; i <= 3; i++) {
          var id = "tr" + i + "-1";
          document.getElementById(id).innerHTML = "";
      }
  }


}

function resizeSecondTable() {
    var table2 = document.getElementById("matr-table-2");
    var row2 = document.getElementById("row2").value;
    var col2 = document.getElementById("col2").value;
    row2 = Number(row2);
    col2 = Number(col2);
    
    if (row2 < 0 || col2 < 0) {
      alert("Size can't be <0 !")
    } 
    if (row2 == 0) {
        row2 = 3;
    }
    if (col2 == 0) {
        col2 = 3;
    }
    //document.getElementById("opers").innerHTML = 
   // document.getElementById("matr-table-1").innerHTML = "<tbody><tr><td><input size='0' name='num1[]' value=" + row1 + "|" + col1 + "></td></tr><tr id='tr1-1'></tr><tr id='tr2-1'></tr><tr id='tr3-1'></tr></tbody>"
    //document.getElementById("matr-table-1").innerHTML = "<tbody><tr>" + col1 * "<td><input size='0' name='num1[]' value=" + row1 + "|" + col1 + "></td>" + "</tr><tr id='tr1-1'></tr><tr id='tr2-1'></tr><tr id='tr3-1'></tr></tbody>"
   // document.getElementById("tr1-1").innerHTML = "<td><input name='num1[]' value=" + row1 + "|" + col1 + "></td>" + "<td><div class='col-xs-6'><input type='text' name='num1[]' placeholder='num' class='form-control name_list'/></div></td>".repeat(col1);
    document.getElementById("tr1-2").innerHTML = "<td><div class='col-xs-6'><input type='text' name='num2[]' placeholder='0' class='form-control name_list'/></div></td>".repeat(col2);
    document.getElementById("tr2-2").innerHTML = "<td><div class='col-xs-6'><input type='text' name='num2[]' placeholder='0' class='form-control name_list'/></div></td>".repeat(col2);
    document.getElementById("tr3-2").innerHTML = "<td><div class='col-xs-6'><input type='text' name='num2[]' placeholder='0' class='form-control name_list'/></div></td>".repeat(col2);
    
    var size = document.getElementById("size");
    let a = String(size.value);
    if (!a.includes('FLAG|2;' + row2 + ';' + col2 + '|-')) {
        size.value = a + 'FLAG|2;' + row2 + ';' + col2 + '|-';
    }
    //let a = "<div class='col-xs-6'><input value='|1;" + row1 + ";" + col1 +"|' name='num1[]' size='2'></div>";
    //let b = document.getElementById("aa");
    //b.insertAdjacentHTML("beforebegin", a);
    //document.getElementById("opers").innerHTML = "<div class='col-xs-6'><input value='|1;" + row1 + ";" + col1 +"|' name='num1[]' size='2'></div> \
    //    <div class='col-xs-6'><input value='➕' class='form-control name_list' type='submit' name='oper' size='2'></div>  \
    //    <div class='col-xs-6'><input value='✖' class='form-control name_list' type='submit' name='oper' size='2'></div>  \
    //    <div class='col-xs-6'><input value='➖' class='form-control name_list' type='submit' name='oper' size='2'></div>";

    //let size = document.createElement("div");
    //let a = document.getElementById("opers");
    //size.innerHTML = "<input value='" + row1 + "|" + col1 +"' name='num1[]' size='2'>";
    //a.append(size);
    
    if (row2 >= 3) { 
      for (let i = 0; i < (row2 - 3); i++) {
          var row = table2.insertRow(0);
          for (let j = 0; j < col2; j++) {
              var col = row.insertCell(j);
              col.innerHTML = "<td><div class='col-xs-6'><input type='text' name='num2[]' placeholder='0' class='form-control name_list'/></div></td>";
          }
      }
  }
  else {
      for (let i = row2 + 1; i <= 3; i++) {
          var id = "tr" + i + "-2";
          document.getElementById(id).innerHTML = "";
      }
  }
}
</script>

{% endblock %}



{% block content %}

<section>
  
  <div class="container w-75  ">

    <div class="main-area row align-items-center">  

      <div class="title"><h1 align="center">Matrix calculate</h1></div>
      <div class="notif"><h5 style="color:darkgray" align="center">for default empty fields = 0</h5></div>

      <div class="ma-matr-size1 col-1">
        <h4>Size:</h4>
        <div class="col-xs-6"><input id="row1" class="form-control name_list" type="text" name="size1[]" size="2"></div>
        <div class="col-xs-6"><input id="col1" class="form-control name_list" type="text" name="size1[]" size="2"></div>
        <div class="col-xs-6"><button id="add1" onclick="resizeFirstTable()" class="form-control name_list" size="2">Ok</button></div>               
      </div>
          
       <!-- <div class="col-4 matr1">-->
      <!--<div class="col-10 matr">-->
      <div class="ma-matr-tables col-10">
        <form method="POST" action="/calc" id="form">
          <div class="matr-area row align-items-center">
            <div class="mta-matr1 col-5">
              <div class="matr-1">
                <table class="table" id="matr-table-1">
                  <tbody>
                    <tr id="tr1-1">
                      <td><div class="col-xs-6"><input type="text" name="num1[]" placeholder="0" class="form-control name_list"/></div></td>
                      <td><div class="col-xs-6"><input type="text" name="num1[]" placeholder="0" class="form-control name_list"/></div></td>
                      <td><div class="col-xs-6"><input type="text" name="num1[]" placeholder="0" class="form-control name_list"/></div></td>
                    </tr>
                    <tr id="tr2-1">
                      <td><div class="col-xs-6"><input type="text" name="num1[]" placeholder="0" class="form-control name_list"/></div></td>
                      <td><div class="col-xs-6"><input type="text" name="num1[]" placeholder="0" class="form-control name_list"/></div></td>
                      <td><div class="col-xs-6"><input type="text" name="num1[]" placeholder="0" class="form-control name_list"/></div></td>
                    </tr>
                    <tr id="tr3-1">
                      <td><div class="col-xs-6"><input type="text" name="num1[]" placeholder="0" class="form-control name_list"/></div></td>
                      <td><div class="col-xs-6"><input type="text" name="num1[]" placeholder="0" class="form-control name_list"/></div></td>
                      <td><div class="col-xs-6"><input type="text" name="num1[]" placeholder="0" class="form-control name_list"/></div></td>
                    </tr>
                  </tbody>
                </table>            
              </div>
            </div>
        
            <div class="mta-opers col-2 operations" id="opers">
              <div class="col-xs-6"><input hidden class="form-control name_list" name="size" id="size" size="2"></div>
              <div class="col-xs-6"><input value="➕" class="form-control name_list" type="submit" name="oper" size="2"></div>
              <div class="col-xs-6"><input value="✖" class="form-control name_list" type="submit" name="oper" size="2"></div>
              <div class="col-xs-6"><input value="➖" class="form-control name_list" type="submit" name="oper" size="2"></div>
            </div>
      
            <div class="mta-matr2 col-5">
              <div class="matr-2">
                <table class="table" id="matr-table-2">
                  <tbody>
                    <tr id="tr1-2">
                      <td><div class="col-xs-6"><input type="text" name="num2[]" placeholder="0" class="form-control name_list"/></div></td>
                      <td><div class="col-xs-6"><input type="text" name="num2[]" placeholder="0" class="form-control name_list"/></div></td>
                      <td><div class="col-xs-6"><input type="text" name="num2[]" placeholder="0" class="form-control name_list"/></div></td>
                    </tr>
                    <tr id="tr2-2">
                      <td><div class="col-xs-6"><input type="text" name="num2[]" placeholder="0" class="form-control name_list"/></div></td>
                      <td><div class="col-xs-6"><input type="text" name="num2[]" placeholder="0" class="form-control name_list"/></div></td>
                      <td><div class="col-xs-6"><input type="text" name="num2[]" placeholder="0" class="form-control name_list"/></div></td>
                    </tr>
                    <tr id="tr3-2">
                      <td><div class="col-xs-6"><input type="text" name="num2[]" placeholder="0" class="form-control name_list"/></div></td>
                      <td><div class="col-xs-6"><input type="text" name="num2[]" placeholder="0" class="form-control name_list"/></div></td>
                      <td><div class="col-xs-6"><input type="text" name="num2[]" placeholder="0" class="form-control name_list"/></div></td>
                    </tr>
                  </tbody>
                </table>
              </div>
            </div>
          </div>
        </form>
      </div>

      <div class="ma-matr-size2 col-1 matr-size">
        <h4>Size:</h4>
        <div class="col-xs-6"><input id="row2" class="form-control name_list" type="text" name="a[]" size="2"></div>
        <div class="col-xs-6"><input id="col2" class="form-control name_list" type="text" name="a[]" size="2"></div> 
        <div class="col-xs-6"><button id="add2" onclick="resizeSecondTable()" class="form-control name_list" size="2">Ok</button></div>                    
      </div>
    
    </div>
    
  </div>

</section>
{% endblock %}

